
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>SIP Web Call</title>
  <script src="/static/sip.min.js"></script>
</head>
<body>
  <h2>SIP Call</h2>
  <input id="identity" placeholder="Your username (alice or bob)">
    <input id="target" placeholder="Target username">
    <button onclick="makeCall()">Call</button>
<script>
  let userAgent;

  function makeCall() {
    const identity = document.getElementById('identity').value;
    const target = document.getElementById('target').value;

    userAgent = new SIP.UserAgent({
      uri: `sip:${identity}@sip-flask-app-production.up.railway.app`,
      transportOptions: {
        server: 'wss://sip-flask-app-production.up.railway.app/ws'
      },
      authorizationUsername: identity,
      authorizationPassword: identity === 'alice' ? 'alicepass' : 'bobpass'
    });

    userAgent.start().then(() => {
      const inviter = new SIP.Inviter(userAgent, `sip:${target}@sip-flask-app-production.up.railway.app`);
      inviter.invite();
    });
  }
</script>

</body>
</html>